// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r;n=io.connect("http://localhost:3000");r=function(e){return{message:e}};t=function(e){return $("<div/>").text(e).html()};e=function(e){return $("<div/>").html(e).text()};n.on("onConnect",function(e){console.log(e);$("#chat-history").append("<p class='on-connect'><span class='message'> "+t(e.message)+":</span> "+e.date+"</p>");return n.emit("onConnect",r("client connected:"))});n.on("updateChat",function(e){var r,i,s;i=(s=e.username===n.username)!=null?s:{self:""};r=$("#chat-history");r.append("<p class='chat'><span class='username "+i+"'>"+t(e.username)+"</span>: "+t(e.message)+"</p>");return r.scrollTop(r[0].scrollHeight)});n.on("newUser",function(e){var r;r=$("#chat-history");r.append("<p class='new-user'><span class='username'>"+t(e.message)+"</span> has joined the conversation.</p>");r.scrollTop(r[0].scrollHeight);if(n.username===e.message){$("#authenticate").hide("slow");$("#chat").show("slow");return $("#chat-input").focus()}});$(function(){$("#login-form input[name='username']").focus();$("#login-form").submit(function(e){var t;e.preventDefault();t=$("#login-form input[name='username']").val();if(t){n.username=t;return n.emit("setName",r(t))}});return $("#chat-input-form").submit(function(e){var t,i;e.preventDefault();t=$("#chat-input");i=t.val();t.val("");return n.emit("onChat",r(i))})})}).call(this);